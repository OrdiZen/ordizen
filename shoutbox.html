<!DOCTYPE html>
<html lang="fr">
<head>
  <meta charset="UTF-8">
  <title>Shoutbox | OrdiZen</title>
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <link rel="icon" href="logo-ordizen.png">
  <!-- ... [le même style et contenu que ta version, non modifié] ... -->
  <style>
    /* ... [ton CSS actuel, inchangé] ... */
  </style>
</head>
<body>
  <nav class="navbar">
    <span class="logo-title">OrdiZen</span>
    <div id="menu-nav">
      <a href="index.html">Accueil</a>
      <a href="shoutbox.html" class="active">Shoutbox</a>
      <a href="services.html">Services</a>
      <a href="contact.html">Contact</a>
    </div>
  </nav>
  <div class="container">
    <!-- ... [contenu central inchangé] ... -->
    <div class="titre-zen">Shoutbox</div>
    <div class="slogan-zen">Discutez en temps réel avec la communauté OrdiZen&nbsp;!</div>
    <div class="shoutbox-case">
      <div class="shoutbox-messages" id="messages">
        <!-- Les messages s'affichent ici -->
      </div>
      <form class="shoutbox-form" id="shoutbox-form" autocomplete="off">
        <input type="text" class="shoutbox-input" id="shoutbox-input" placeholder="Votre message..." maxlength="222" required>
        <button type="submit" class="shoutbox-btn">Envoyer</button>
      </form>
    </div>
  </div>
  <script src="https://cdn.jsdelivr.net/npm/@supabase/supabase-js@2" defer></script>
  <script>
    document.addEventListener('DOMContentLoaded', () => {
      const SUPABASE_URL = 'https://ewsehfkbdsjzbpmxoesw.supabase.co';
      const SUPABASE_KEY = 'eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6ImV3c2VoZmtiZHNqemJwbXhvZXN3Iiwicm9sZSI6ImFub24iLCJpYXQiOjE3NDk3NjIxMTYsImV4cCI6MjA2NTMzODExNn0.RMS2dRPUokGoyYiwxm1e0lrZa0VFWlgCXAMl5SU6N98';
      const supabase = window.supabase.createClient(SUPABASE_URL, SUPABASE_KEY);

      async function updateMenu() {
        const { data: { user } } = await supabase.auth.getUser();
        const nav = document.getElementById('menu-nav');
        while (nav.children.length > 4) nav.removeChild(nav.lastChild);

        if (!user) {
          let conn = document.createElement('a');
          conn.href = 'auth.html';
          conn.textContent = 'Connexion';
          nav.appendChild(conn);
        } else {
          let deco = document.createElement('span');
          deco.className = "menu-link";
          deco.style.cursor = "pointer";
          deco.title = "Déconnexion";
          deco.innerHTML = `<svg xmlns="http://www.w3.org/2000/svg" width="29" height="22" fill="none" viewBox="0 2 20 22"><path d="M20 14.2h-14m11-4 4 4-4 4M4 18.2a4 4 0 1 1 0-8m0 8V8.2" stroke="#42f8ff" stroke-width="2.4" stroke-linecap="round" stroke-linejoin="round" /></svg>`;
          deco.onclick = async () => { await supabase.auth.signOut(); updateMenu(); };
          nav.appendChild(deco);
        }
      }
      updateMenu();

      // SHOUTBOX (local demo)
      const messagesDiv = document.getElementById('messages');
      const form = document.getElementById('shoutbox-form');
      const input = document.getElementById('shoutbox-input');

      form.addEventListener('submit', function(e) {
        e.preventDefault();
        const val = input.value.trim();
        if(val.length > 0) {
          // Affichage local (remplacer ici par l’envoi Supabase plus tard)
          const div = document.createElement('div');
          div.className = 'shoutbox-message me';
          div.textContent = val;
          messagesDiv.appendChild(div);
          messagesDiv.scrollTop = messagesDiv.scrollHeight;
        }
        input.value = '';
      });
    });
  </script>
</body>
</html>